{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config/index.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./src/actions/posts.js","webpack:///./src/actions/user.js","webpack:///./src/common/ajax.js","webpack:///./src/common/parse-url.js","webpack:///./src/components/generateAsyncComponent.js","webpack:///./src/components/head/index.js","webpack:///./src/components/meta/index.js","webpack:///./src/components/posts/list/index.js","webpack:///./src/components/posts/list/style.scss","webpack:///./src/components/shell.js","webpack:///./src/components/ui/loading/index.js","webpack:///./src/pages/home/index.js","webpack:///./src/pages/not-found/index.js","webpack:///./src/pages/posts-detail/index.js","webpack:///./src/pages/sign-in/images/react-icon.png","webpack:///./src/pages/sign-in/index.js","webpack:///./src/pages/sign-in/style.scss","webpack:///./src/pages/topics/index.js","webpack:///./src/reducers/index.js","webpack:///./src/reducers/posts.js","webpack:///./src/reducers/user.js","webpack:///./src/router/index.js","webpack:///./src/server/index.js","webpack:///./src/server/server.js","webpack:///./src/server/sign.js","webpack:///./src/store/index.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"axios\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"express\"","webpack:///external \"lodash/merge\"","webpack:///external \"path\"","webpack:///external \"prop-types\"","webpack:///external \"react\"","webpack:///external \"react-css-modules\"","webpack:///external \"react-document-meta\"","webpack:///external \"react-dom\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-redux\"","webpack:///external \"react-router\"","webpack:///external \"react-router-dom\"","webpack:///external \"redux\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\""],"names":["config","debug","host","port","auth_cookie_name","class_scoped_name","public_path","process","module","exports","loadPostsList","id","filter","dispatch","getState","Promise","resolve","reject","list","loading","data","type","variables","convertFilrerFormat","url","method","operationName","query","err","postsData","Reflect","ownKeys","length","concat","modifyList","arr","map","text","item","content_html","replace","slice","content_summary","push","params","i","v","join","saveAccessToken","saveUserInfo","signIn","signOut","accessToken","userinfo","nickname","window","location","origin","success","AJAX","headers","option","_t","Date","getTime","then","resp","res","catch","error","response","parseUrl","search","paramPart","substr","split","reduce","parts","asyncRouteComponent","loader","Placeholder","Component","callback","ResolvedComponent","default","state","self","asyncComponent","load","setState","props","React","Head","bind","href","alert","propTypes","PropTypes","object","isRequired","func","mapStateToProps","mapDispatchToProps","Meta","metaObj","title","description","canonical","meta","PostsList","_id","user_id","avatar_url","styles","avatar","topic_id","name","comment_count","string","Shell","loadData","store","match","code","defaultProps","contextTypes","LoadingMore","Home","sort_by","deleted","weaken","NotFound","PostsDetail","notFoundPgae","componentWillMount","posts","__html","SignIn","submit","event","preventDefault","refs","value","focus","Topics","states","user","_states","JSON","stringify","initialStateJSON","initialState","action","getPostsListByListId","getAccessToken","getUserInfo","requireAuth","Layout","requireTourists","triggerEnter","routeArr","path","exact","head","component","enter","router","route","index","dom","require","app","use","bodyParser","json","urlencoded","extended","express","static","__dirname","get","req","parse","cookies","_route","_match","some","context","loadAsyncRouterComponent","WrappedComponent","result","_Router","html","ReactDOMServer","renderToString","reduxState","DocumentMeta","renderAsHTML","writeHead","Location","status","render","end","listen","console","log","Router","post","body","cookie","httpOnly","maxAge","send","clearCookie","configureStore","middleware","thunk","__NODE__","__DEV__","rootReducer","applyMiddleware"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;ACjFA;AACA,IAAIA,SAAS;AACX;AACAC,SAAO,KAFI;;AAIX;AACAC,QAAM,WALK;;AAOX;AACAC,QAAM,IARK;;AAUX;AACAC,oBAAkB,eAXP;;AAaX;AACAC,qBAAmB,iBAdR;;AAgBX;AACA;AACAC,eAAa;;AAGf;AArBa,CAAb,CAsBA,IAAIC,SAAA,IAAwB,aAA5B,EAA2C;AACzCP,SAAOC,KAAP,GAAe,IAAf;AACAD,SAAOK,iBAAP,GAA2B,iCAA3B;AACD;;AAEDG,OAAOC,OAAP,GAAiBT,MAAjB,C;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"//localhost:4000/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\n// 生产环境配置\nlet config = {\n  // 正式环境\n  debug: false,\n\n  // 域名\n  host: 'localhost',\n\n  //  服务端口\n  port: 4000,\n\n  // 登录token，cookie 的名称\n  auth_cookie_name: 'signin-cookie',\n\n  // https://github.com/css-modules/css-modules\n  class_scoped_name: '[hash:base64:8]',\n\n  // 前端打包后，静态资源路径前缀\n  // 生成效果如：//localhost:4000/app.bundle.js\n  public_path: '//localhost:4000',\n}\n\n// 开发环境配置\nif (process.env.NODE_ENV == 'development') {\n  config.debug = true\n  config.class_scoped_name = '[name]_[local]__[hash:base64:5]'\n}\n\nmodule.exports = config\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","import Ajax from '../common/ajax'\nimport { getPostsListByListId } from '../reducers/posts'\n\nexport function loadPostsList({ id, filter = {} }) {\n  return (dispatch, getState) => {\n  return new Promise(async (resolve, reject) => {\n\n    let list = getPostsListByListId(getState(), id);\n\n    list.loading = true;\n    list.filter = filter;\n    if (!list.data) list.data = [];\n\n    dispatch({ type: 'SET_POSTS_LIST_BY_NAME', id, data: list });\n\n    let variables = convertFilrerFormat(filter);\n\n    if (!variables) {\n      variables = ''\n    } else {\n      variables = `(${variables})`\n    }\n\n    // 储存 cookie\n    let [ err, data ] = await Ajax({\n      url: 'http://admin.xiaoduyu.com/graphql',\n      method: 'post',\n      data: {\n        operationName:null,\n        variables:{},\n        query:`{\n          posts${variables}{\n            _id\n            comment_count\n            content_html\n            title\n            topic_id{\n              _id\n              name\n            }\n            type\n            user_id{\n              _id\n              nickname\n              brief\n              avatar_url\n            }\n          }\n        }`\n      }\n    });\n\n    if (data && data.data) {\n\n      list.loading = false;\n\n      let postsData = data.data[Reflect.ownKeys(data.data)[0]];\n\n      if (postsData && postsData.length > 0) {\n        list.data = list.data.concat( modifyList(postsData) );\n      }\n\n      dispatch({ type: 'SET_POSTS_LIST_BY_NAME', id, data: list })\n      resolve([ null, list.data ])\n\n    } else {\n      resolve(['loadPostList load failed'])\n    }\n\n  })\n  }\n}\n\n\nconst modifyList = (data) => {\n  let arr = []\n  data.map(item=>{\n\n    let text = item.content_html.replace(/<[^>]+>/g,\"\")\n    if (text.length > 140) text = text.slice(0, 140)+'...'\n    item.content_summary = text\n\n    arr.push(item)\n  })\n\n  return arr\n}\n\n// 将参数对象转换成，GraphQL提交参数的格式\nconst convertFilrerFormat = (params) => {\n  let arr = []\n  for (let i in params) {\n    let v = ''\n    switch (typeof params[i]) {\n      case 'string': v = '\"'+params[i]+'\"'; break;\n      case 'number': v = params[i]; break;\n      default: v = params[i];\n    }\n    arr.push(i+':'+v)\n  }\n  return arr.join(',');\n}\n","import Ajax from '../common/ajax'\n\n// 储存accessToken到redux\nexport function saveAccessToken({ accessToken }) {\n  return dispatch => {\n    dispatch({ type: 'SAVE_ACCESS_TOKEN', accessToken })\n  }\n}\n\nexport function saveUserInfo({ userinfo }) {\n  return dispatch => {\n    dispatch({ type: 'SAVE_USERINFO', userinfo })\n  }\n}\n\nexport function signIn({ nickname }) {\n  return dispatch => {\n  return new Promise(async (resolve, reject) => {\n\n    // 这里写你的登录请求，登录成功以后，将token储存到cookie，使用httpOnly(比较安全)\n    // your code ...\n\n    // 储存 cookie\n    let [ err, data ] = await Ajax({\n      url: window.location.origin+'/sign/in',\n      method: 'post',\n      data: {\n        nickname: nickname\n      }\n    })\n\n    if (data && data.success) {\n      resolve([null, true])\n    } else {\n      resolve(['sign error'])\n    }\n\n  })\n  }\n}\n\nexport function signOut() {\n  return dispatch => {\n  return new Promise(async (resolve, reject) => {\n\n    let [ err, data ] = await Ajax({\n      url: window.location.origin+'/sign/out',\n      method: 'post'\n    })\n\n    if (data && data.success) {\n      resolve([null, true])\n    } else {\n      resolve(['sign error'])\n    }\n\n  })\n  }\n}\n","\nimport config from '../../config';\nimport axios from 'axios';\n\nconst AJAX = ({ url = '', method = 'get', data = {}, headers = {} }) => {\n\n  let option = { url, method, headers }\n\n  if (method == 'get') {\n    data._t = new Date().getTime();\n    option.params = data;\n  } else if (method == 'post') {\n    option.data = data;\n  }\n\n  return axios(option).then(resp => {\n    if (resp && resp.data) {\n      let res = resp.data;\n      return [null, res];\n    } else {\n      return ['return none'];\n    }\n  })\n  .catch(function (error) {\n    if (error && error.response && error.response.data) {\n      return [error.response.data];\n    } else {\n      return ['return error'];\n    }\n  })\n\n}\n\nexport default AJAX;\n","\nconst parseUrl = (search) => {\n  const paramPart = search.substr(1).split('&');\n  return paramPart.reduce(function(res, item) {\n    if (item) {\n      let parts = item.split('=');\n      res[parts[0]] = parts[1] || '';\n    }\n    return res;\n  }, {});\n}\n\nexport default parseUrl;\n","import React from 'react';\nimport Loading from './ui/loading';\n\nexports.asyncRouteComponent = ({ loader, Placeholder }) => {\n\n  let Component = null;\n\n  return class asyncComponent extends React.Component {\n\n    // 加载组件\n    static load(callback = ()=>{}) {\n      return loader().then((ResolvedComponent) => {\n        Component = ResolvedComponent.default || ResolvedComponent;\n        callback(Component);\n      });\n    }\n\n    constructor() {\n      super();\n      this.state = { Component }\n    }\n\n    componentDidMount() {\n      // 客户端加载异步组件\n      const self = this;\n      asyncComponent.load().then(()=>{\n        if (self.state.Component !== Component) {\n          self.setState({ Component });\n        }\n      });\n    }\n\n    render() {\n\n      const { Component } = this.state;\n\n      if (Component) return <Component {...this.props} />;\n      if (Placeholder) {\n        return <Placeholder {...this.props} />;\n      } else {\n        return <Loading text=\"组件装载中...\" />;\n      }\n\n      return null;\n    }\n  }\n}\n","import React from 'react';\nimport { Link, NavLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { signOut } from '../../actions/user';\nimport { getUserInfo } from '../../reducers/user';\n\n// import CSSModules from 'react-css-modules';\n// import styles from './style.scss';\n\n\nexport class Head extends React.Component {\n\n  static propTypes = {\n    userinfo: PropTypes.object.isRequired,\n    signOut: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.signOut = this.signOut.bind(this);\n  }\n\n  async signOut() {\n    let [err, success] = await this.props.signOut();\n    if (success) {\n      // 退出成功跳转到首页\n      window.location.href = '/';\n    } else {\n      alert('退出失败');\n    }\n  }\n\n  render() {\n\n    const { userinfo } = this.props\n\n    return (<header>\n        <nav className=\"navbar fixed-top navbar-expand-md navbar-expand-lg navbar-dark bg-dark bd-navbar\">\n\n        <NavLink className=\"navbar-brand\" exact to=\"/\">React同构脚手架</NavLink>\n\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarText\" aria-controls=\"navbarText\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarText\">\n\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" exact to=\"/\">Home</NavLink>\n            </li>\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" exact to=\"/topics\">Topics</NavLink>\n            </li>\n          </ul>\n\n          <span className=\"mt-2 mt-md-0\">\n            <ul className=\"navbar-nav mr-auto\">\n              <li className=\"nav-item\">\n                <span className=\"nav-link\">{userinfo.nickname}</span>\n              </li>\n              <li className=\"nav-item\">\n                <a className=\"nav-link\" href=\"javascript:void(0)\" onClick={this.signOut}>退出</a>\n              </li>\n            </ul>\n          </span>\n\n        </div>\n      </nav>\n    </header>)\n\n  }\n\n}\n\n// Head = CSSModules(Head, styles);\n\nconst mapStateToProps = (state, props) => {\n  return {\n    userinfo: getUserInfo(state)\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signOut: bindActionCreators(signOut, dispatch)\n  }\n}\n\nHead = connect(mapStateToProps,mapDispatchToProps)(Head);\n\nexport default Head;\n","import React, { Component } from 'react';\n\n// https://github.com/kodyl/react-document-meta\nimport DocumentMeta from 'react-document-meta';\n\nexport class Meta extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n\n    let metaObj = {}\n\n    const { title, description, canonical, meta } = this.props;\n\n    if (title) metaObj.title = title;\n    if (description) metaObj.description = description;\n    if (canonical) metaObj.canonical = canonical;\n    if (meta) metaObj.title = meta;\n\n    return (\n      <DocumentMeta {...metaObj} />\n    )\n\n  }\n}\n\nexport default Meta;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { loadPostsList } from '../../../actions/posts';\nimport { getPostsListByListId } from '../../../reducers/posts';\n\n// import CSSModules from 'react-css-modules';\nimport styles from './style.scss';\n\nexport class PostsList extends React.Component {\n\n  static propTypes = {\n    // 要获取的列表的id\n    id: PropTypes.string.isRequired,\n    // 筛选条件\n    filter: PropTypes.object.isRequired,\n\n    // 列表数据\n    list: PropTypes.object.isRequired,\n    // 加载列表的方法\n    loadPostsList: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {}\n  }\n\n  componentDidMount() {\n\n    const { id, filter, list, loadPostsList } = this.props\n\n    if (!list.data) {\n      this.props.loadPostsList({\n        id,\n        filter\n      })\n    }\n\n  }\n\n  render() {\n\n    const { list } = this.props\n    const { loading, data } = list\n\n    return(<div>\n      {loading ? <div>loading...</div> : null}\n      <div className=\"list-group\">\n        {data && data.map(item=>(\n          <Link key={item._id}\n            to={`/posts/${item._id}`}\n            className=\"list-group-item list-group-item-action flex-column align-items-start\">\n            <p className=\"mb-1\">\n              <img src={item.user_id.avatar_url} className={styles.avatar} />\n              {item.user_id.nickname}\n            </p>\n            <div className=\"d-flex w-100 justify-content-between\">\n              <h5 className=\"mb-1\">{item.title}</h5>\n              <small>{item.topic_id.name}</small>\n            </div>\n            <p className=\"mb-1\">{item.content_summary}</p>\n            <small>{item.comment_count > 0 ? `有${item.comment_count}人评论` : null}</small>\n          </Link>\n        ))}\n      </div>\n    </div>)\n  }\n\n}\n\n// PostsList = CSSModules(PostsList, styles);\n\nconst mapStateToProps = (state, props) => {\n  return {\n    list: getPostsListByListId(state, props.id)\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    loadPostsList: bindActionCreators(loadPostsList, dispatch)\n  }\n}\n\nPostsList = connect(mapStateToProps,mapDispatchToProps)(PostsList);\n\nexport default PostsList;\n","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".sFFM_yov{width:30px;height:30px;border-radius:15px;margin-right:10px}\", \"\", {\"version\":3,\"sources\":[\"/Users/wuseijian/Documents/GitHub/react-starter/src/components/posts/list/style.scss\"],\"names\":[],\"mappings\":\"AAAA,UACE,WAAY,AACZ,YAAa,AACb,mBAAoB,AACpB,iBAAmB,CAAE\",\"file\":\"style.scss\",\"sourcesContent\":[\".avatar {\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 15px;\\n  margin-right: 10px; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"avatar\": \"sFFM_yov\"\n};","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport parseUrl from '../common/parse-url';\n\n// 壳组件，用于给页面组件，套一个外壳\n// 这样可以通过壳组件，给每个页面，传递参数\n\nconst Shell = (Component) => {\n\n  if (!Component.loadData) {\n    Component.loadData = ({ store, match }) => {\n      return new Promise(async function (resolve, reject) {\n        resolve({ code:200 });\n      })\n    }\n  }\n\n  class Shell extends React.Component {\n\n    static defaultProps = {\n      loadData: Component.loadData || null\n    }\n\n    constructor(props) {\n      super(props);\n    }\n\n    // 组件加载完成\n    componentWillMount() {\n      const { search } = this.props.location;\n      this.props.location.params = search ? parseUrl(search) : null;\n      // console.log('进入组件')\n    }\n\n    // 组件加载完成\n    componentDidMount() {\n      // console.log('组件加载完成');\n    }\n\n    // 更新组件\n    componentDidUpdate() {\n      // console.log('组件加载更新了');\n    }\n\n    // 组件被卸载\n    componentWillUnmount() {\n      // console.log('组件加载被卸载');\n    }\n\n    render() {\n      return (<div>\n        <Component {...this.props} />\n      </div>)\n    }\n\n  }\n\n  Shell.contextTypes = {\n  }\n\n  Shell.propTypes = {\n  }\n\n  const mapStateToProps = (state) => {\n    return {\n    }\n  }\n\n  const mapDispatchToProps = (dispatch, props) => {\n    return {\n    }\n  }\n\n  return connect(mapStateToProps, mapDispatchToProps)(Shell);\n}\n\nexport default Shell;\n","import React, { Component } from 'react'\n\n// import CSSModules from 'react-css-modules'\n// import styles from './style.scss'\n\n\n// @CSSModules(styles)\nexport default class LoadingMore extends Component {\n\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n\n    const { text = '正在加载中...' } = this.props\n    // styleName=\"loading\"\n    return <div><span></span>{text}</div>\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { loadPostsList } from '../../actions/posts';\n\n// http://blog.csdn.net/ISaiSai/article/details/78094556\nimport { withRouter } from 'react-router-dom';\n\n// 壳组件\nimport Shell from '../../components/shell';\nimport Meta from '../../components/meta';\nimport PostsList from '../../components/posts/list';\n\nexport class Home extends React.Component {\n\n  // 服务端渲染\n  // 加载需要在服务端渲染的数据\n  static loadData({ store, match }) {\n    return new Promise(async function (resolve, reject) {\n\n      /* 敲黑板～ 这里是重点～～～～～～～～～～～（为了引起你的注意，我写了这句话）*/\n\n      /**\n       * 这里的 loadPostsList 方法，是在服务端加载 posts 数据，储存到 redux 中。\n       * 这里对应的组件是 PostsList，PostsList组件里面也有 loadPostsList 方法，但它是在客户端执行。\n       * 然后，服务端在渲染 PostsList 组件的时候，我们会先判断如果redux中，是否存在该条数据，如果存在，直接拿该数据渲染\n       */\n\n      await loadPostsList({\n        id: 'home',\n        filter: {\n          sort_by: \"create_at\",\n          deleted: false,\n          weaken: false\n        }\n      })(store.dispatch, store.getState);\n\n      resolve({ code:200 });\n    })\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return(<div>\n\n      <Meta title=\"首页\" />\n\n      <PostsList\n        id={'home'}\n        filter={{\n          sort_by: \"create_at\",\n          deleted: false,\n          weaken: false\n        }}\n        />\n    </div>)\n  }\n\n}\n\n\nHome = withRouter(Home);\n\nexport default Shell(Home);\n","import React from 'react';\n\nimport Shell from '../../components/shell';\nimport Meta from '../../components/meta';\n\nexport class NotFound extends React.Component {\n\n  static loadData({ store, match }) {\n    return new Promise(async function (resolve, reject) {\n      resolve({ code:404 });\n    })\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return(<div>\n      <Meta title=\"404,无法找到该页面\" />\n      404,无法找到该页面\n    </div>)\n  }\n\n}\n\nexport default Shell(NotFound);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { loadPostsList } from '../../actions/posts';\nimport { getPostsListByListId } from '../../reducers/posts';\n\nimport Shell from '../../components/shell';\nimport Meta from '../../components/meta';\n\nexport class PostsDetail extends React.Component {\n\n  // 服务端渲染\n  // 加载需要在服务端渲染的数据\n  static loadData({ store, match, userinfo }) {\n    return new Promise(async function (resolve, reject) {\n\n      const { id } = match.params;\n\n      const [ err, data ] = await loadPostsList({\n        id: id,\n        filter: {\n          _id: id,\n          deleted: false,\n          weaken: false\n        }\n      })(store.dispatch, store.getState);\n\n      // 没有找到帖子，设置页面 http code 为404\n      if (err || data.length == 0) {\n        resolve({ code:404 });\n      } else {\n        resolve({ code:200 });\n      }\n\n    })\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      notFoundPgae: false\n    }\n  }\n\n  componentWillMount() {\n    // 服务端渲染，404内容显示处理\n    const { list, notFoundPgae } = this.props;\n    if (list && list.data && !list.data[0]) {\n      this.state.notFoundPgae = true;\n    }\n  }\n\n  async componentDidMount() {\n\n    const { id } = this.props.match.params;\n    const { list, loadPostsList } = this.props;\n\n    if (!list || !list.data) {\n      await this.props.loadPostsList({\n        id,\n        filter: {\n          _id: id\n        }\n      })\n\n      this.componentWillMount();\n    }\n\n  }\n\n  render() {\n\n    const { list } = this.props;\n    const { loading, data } = list || {};\n    const posts = data && data[0] ? data[0] : null;\n    const { notFoundPgae } = this.state;\n\n    \n    // 404 处理\n    if (notFoundPgae) {\n      return '404 Not Found';\n    }\n\n    return(<div>\n\n      {loading ? <div>loading...</div> : null}\n\n      <Meta title={posts ? posts.title : '加载中...'} />\n\n      {posts ?\n        <div className=\"jumbotron\">\n          <h1 className=\"display-4\">{posts.title}</h1>\n          <p className=\"lead\">{posts.topic_id.name}</p>\n          <hr className=\"my-4\" />\n          {posts.content_html ?\n            <div dangerouslySetInnerHTML={{__html:posts.content_html}} />\n            : null}\n        </div>\n        : null}\n\n    </div>)\n  }\n\n}\n\nconst mapStateToProps = (state, props) => {\n  const { id } = props.match.params;\n  return {\n    list: getPostsListByListId(state, id)\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    loadPostsList: bindActionCreators(loadPostsList, dispatch)\n  }\n}\n\nPostsDetail = connect(mapStateToProps,mapDispatchToProps)(PostsDetail);\n\nexport default Shell(PostsDetail);\n","module.exports = __webpack_public_path__ + \"14c89a41e5154b4a2920df0115337ad5.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Route, Link, withRouter } from 'react-router-dom';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { signIn } from '../../actions/user';\n\nimport CSSModules from 'react-css-modules';\nimport styles from './style.scss';\n\nimport Shell from '../../components/shell';\nimport Meta from '../../components/meta';\n\n\nexport class SignIn extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.submit = this.submit.bind(this);\n  }\n\n  async submit(event) {\n    event.preventDefault();\n\n    const { nickname } = this.refs;\n    const { signIn } = this.props;\n\n    if (!nickname.value) {\n      nickname.focus();\n      return false;\n    }\n    \n    let [err, success] = await signIn({ nickname: nickname.value });\n\n    if (success) {\n      window.location.href = '/'\n    }\n\n    return false;\n  }\n\n  render() {\n    return(<div styleName=\"container\" className=\"text-center\">\n      <Meta title=\"React同构脚手架\" />\n      <form className=\"form-signin\" onSubmit={this.submit}>\n        <div styleName=\"icon\"></div>\n        <h1 className=\"h3 mb-3 font-weight-normal\">React同构脚手架</h1>\n        <input type=\"text\" ref=\"nickname\" className=\"form-control mb-3\" placeholder=\"请输入昵称\" />\n        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">登录</button>\n      </form>\n    </div>)\n  }\n\n}\n\n\nSignIn = CSSModules(SignIn, styles);\n\nSignIn.propTypes = {\n  signIn: PropTypes.func.isRequired\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signIn: bindActionCreators(signIn, dispatch)\n  }\n}\n\nSignIn = withRouter(connect(mapStateToProps,mapDispatchToProps)(SignIn));\n\nexport default Shell(SignIn);\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"._3EGm54f5{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#343a40}._3EGm54f5>form{margin-top:10%;color:#fff}._3EGm54f5 ._8v9KQQGX{background-image:url(\" + require(\"./images/react-icon.png\") + \");height:120px;background-size:contain;background-position:50%;background-repeat:no-repeat;margin:0 0 20px}.form-signin{width:100%;max-width:330px;padding:15px;margin:0 auto}.form-signin .checkbox{font-weight:400}.form-signin .form-control{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin .form-control:focus{z-index:2}.form-signin input[type=email]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin input[type=password]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}\", \"\", {\"version\":3,\"sources\":[\"/Users/wuseijian/Documents/GitHub/react-starter/src/pages/sign-in/style.scss\"],\"names\":[],\"mappings\":\"AAAA,WACE,kBAAmB,AACnB,MAAS,AACT,OAAU,AACV,WAAY,AACZ,YAAa,AACb,wBAA0B,CAAE,AAE9B,gBACE,eAAgB,AAChB,UAAY,CAAE,AAEhB,sBACE,+CAA+C,AAC/C,aAAc,AACd,wBAAyB,AACzB,wBAA4B,AAC5B,4BAA6B,AAC7B,eAAmB,CAAE,AAEvB,aACE,WAAY,AACZ,gBAAiB,AACjB,aAAc,AACd,aAAe,CAAE,AAEnB,uBACE,eAAiB,CAAE,AAErB,2BACE,kBAAmB,AACnB,sBAAuB,AACvB,YAAa,AACb,aAAc,AACd,cAAgB,CAAE,AAEpB,iCACE,SAAW,CAAE,AAEf,+BACE,mBAAoB,AACpB,6BAA8B,AAC9B,2BAA6B,CAAE,AAEjC,kCACE,mBAAoB,AACpB,yBAA0B,AAC1B,yBAA2B,CAAE\",\"file\":\"style.scss\",\"sourcesContent\":[\".container {\\n  position: absolute;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #343a40; }\\n\\n.container > form {\\n  margin-top: 10%;\\n  color: #fff; }\\n\\n.container .icon {\\n  background-image: url(./images/react-icon.png);\\n  height: 120px;\\n  background-size: contain;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  margin: 0 0 20px 0; }\\n\\n:global .form-signin {\\n  width: 100%;\\n  max-width: 330px;\\n  padding: 15px;\\n  margin: 0 auto; }\\n\\n:global .form-signin .checkbox {\\n  font-weight: 400; }\\n\\n:global .form-signin .form-control {\\n  position: relative;\\n  box-sizing: border-box;\\n  height: auto;\\n  padding: 10px;\\n  font-size: 16px; }\\n\\n:global .form-signin .form-control:focus {\\n  z-index: 2; }\\n\\n:global .form-signin input[type=\\\"email\\\"] {\\n  margin-bottom: -1px;\\n  border-bottom-right-radius: 0;\\n  border-bottom-left-radius: 0; }\\n\\n:global .form-signin input[type=\\\"password\\\"] {\\n  margin-bottom: 10px;\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0; }\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"container\": \"_3EGm54f5\",\n\t\"icon\": \"_8v9KQQGX\"\n};","import React from 'react';\n\nimport Shell from '../../components/shell';\nimport Meta from '../../components/meta';\n\nexport class Topics extends React.Component {\n\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return(<div>\n      <Meta title=\"话题\" />\n      <h2>Topics</h2>\n    </div>)\n  }\n\n}\n\nexport default Shell(Topics);\n","\nimport { combineReducers } from 'redux';\nimport merge from 'lodash/merge';\n\nimport user from './user';\nimport posts from './posts';\n\nlet states = {\n  user,\n  posts\n}\n\n// 创建一个无数据的states，用于在服务端初始redux数据\nlet _states = {};\nfor (let i in states) {\n  _states[i] = merge({}, states[i](), {})\n}\n_states = JSON.stringify(_states);\nexport const initialStateJSON = _states;\n\n// reducer\nexport default combineReducers(states);\n","import merge from 'lodash/merge';\n\nlet initialState = {};\n\nexport default function posts(state = initialState, action = {}) {\n  switch (action.type) {\n\n    case 'SET_POSTS':\n      return merge({}, action.state, {});\n\n    case 'SET_POSTS_LIST_BY_NAME':\n      var { id, data } = action;\n      state[id] = data;\n      return merge({}, state, {});\n\n    default:\n      return state;\n  }\n}\n\nexport const getPostsListByListId = (state, id) => {\n  return state.posts[id] ? state.posts[id] : {};\n}\n","\nimport merge from 'lodash/merge';\n\nlet initialState = {\n  accessToken: '',\n  userinfo: null,\n}\n\nexport default function user(state = initialState, action = {}) {\n\n  switch (action.type) {\n\n    case 'SAVE_ACCESS_TOKEN':\n      state.accessToken = action.accessToken;\n      return merge({}, state, {});\n\n    case 'SAVE_USERINFO':\n      state.userinfo = action.userinfo;\n      return merge({}, state, {});\n\n    default:\n      return state;\n  }\n\n}\n\n// 获取 access token\nexport const getAccessToken = (state) => state.user.accessToken;\n\n// 获取用户信息\nexport const getUserInfo = (state) => state.user.userinfo || {};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Route, Switch, Redirect } from 'react-router-dom';\n\n// 生成异步加载组件\nimport { asyncRouteComponent } from '../components/generateAsyncComponent.js';\n\nimport Head from '../components/head';\n\n/**\n * 创建路由\n * @param  {Object} userinfo 用户信息，以此判断用户是否是登录状态，并控制页面访问权限\n * @return {[type]}\n */\nexport default (user) => {\n\n  // 登录用户才能访问\n  const requireAuth = (Layout, props) => {\n    if (!user) {\n      return <Redirect to=\"/sign-in\" />\n    } else {\n      return <Layout {...props} />\n    }\n  }\n\n  // 游客才能访问\n  const requireTourists = (Layout, props) => {\n    if (user) {\n      return <Redirect to=\"/\" />\n    } else {\n      return <Layout {...props} />\n    }\n  }\n\n  // 大家都可以访问\n  const triggerEnter = (Layout, props) => {\n    return <Layout {...props} />\n  }\n\n  // 路由数组\n  const routeArr = [\n\n    {\n      path: '/',\n      exact: true,\n      head: Head,\n      component: asyncRouteComponent({\n        loader: () => import('../pages/home')\n      }),\n      enter: requireAuth\n    },\n\n    {\n      path: '/posts/:id',\n      exact: true,\n      head: Head,\n      component: asyncRouteComponent({\n        loader: () => import('../pages/posts-detail')\n      }),\n      enter: requireAuth\n    },\n\n    {\n      path: '/topics',\n      exact: true,\n      head: Head,\n      component: asyncRouteComponent({\n        loader: () => import('../pages/topics')\n      }),\n      enter: requireAuth\n    },\n\n    {\n      path: '/sign-in',\n      exact: true,\n      // head: Head,\n      component: asyncRouteComponent({\n        loader: () => import('../pages/sign-in')\n      }),\n      enter: requireTourists\n    },\n\n    {\n      path: '**',\n      head: Head,\n      component: asyncRouteComponent({\n        loader: () => import('../pages/not-found')\n      }),\n      enter: triggerEnter\n    }\n  ]\n\n  let router = () => (<div>\n\n      <Switch>\n        {routeArr.map((route, index) => (\n          <Route\n            key={index}\n            path={route.path}\n            exact={route.exact}\n            component={route.head}\n            />)\n        )}\n      </Switch>\n\n      <Switch>\n        {routeArr.map((route, index) => {\n          if (route.component) {\n            return (<Route\n              key={index}\n              path={route.path}\n              exact={route.exact}\n              component={props => route.enter(route.component, props)}\n              />)\n          }\n        })}\n      </Switch>\n\n      </div>)\n\n  return {\n    list: routeArr,\n    dom: router\n  }\n}\n","// var config = require('../../config');\n// require('babel-register');\n// require('babel-polyfill');\n// require('precss'),\n// require('autoprefixer'),\n/*\nrequire('css-modules-require-hook')({\n  generateScopedName: config.class_scoped_name,\n  extensions: ['.scss', '.css']\n});\n*/\nrequire('./server');\n","\nimport path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport compress from 'compression';\nimport DocumentMeta from 'react-document-meta';\n\n// 服务端渲染依赖\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport { StaticRouter, matchPath } from 'react-router';\nimport { Provider } from 'react-redux';\n\n// 路由配置\nimport configureStore from '../store';\n// 路由组件\nimport createRouter from '../router';\n// 路由初始化的redux内容\nimport { initialStateJSON } from '../reducers';\nimport { saveAccessToken, saveUserInfo } from '../actions/user';\n\n// 配置\nimport { port, auth_cookie_name } from '../../config';\nimport sign from './sign';\n// import webpackHotMiddleware from './webpack-hot-middleware';\n\nconst app = express();\n\n\n// ***** 注意 *****\n// 不要改变如下代码执行位置，否则热更新会失效\n// 开发环境开启修改代码后热更新\n// if (process.env.NODE_ENV === 'development') webpackHotMiddleware(app);\n\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(cookieParser());\napp.use(compress());\napp.use(express.static(__dirname + '/dist'));\n\n\n\n// 登录、退出\napp.use('/sign', sign());\n\napp.get('*', async (req, res) => {\n\n  const store = configureStore(JSON.parse(initialStateJSON));\n\n  let user = null;\n  let accessToken = req.cookies[auth_cookie_name] || '';\n\n  // 验证 token 是否有效\n  if (accessToken) {\n    // 这里可以去查询 accessToken 是否有效\n    // your code\n    // 这里假设如果有 accessToken ，那么就是登录用户，将他保存到redux中\n    user = { id: '001', nickname: accessToken };\n    // 储存用户信息\n    store.dispatch(saveUserInfo({ userinfo: user }));\n    // 储存access token\n    store.dispatch(saveAccessToken({ accessToken }));\n  }\n\n  const router = createRouter(user);\n\n  let _route = null,\n      _match = null;\n\n  router.list.some(route => {\n    let match = matchPath(req.url.split('?')[0], route);\n    if (match && match.path) {\n      _route = route;\n      _match = match;\n      return true;\n    }\n  })\n\n  let context = {\n    // code\n    // url\n  };\n\n  // 加载异步路由组件\n  const loadAsyncRouterComponent = () => {\n    return new Promise(async (resolve) => {\n      await _route.component.load(async (ResolvedComponent)=>{\n        let loadData = ResolvedComponent.WrappedComponent.defaultProps.loadData;\n        let result = await loadData({ store, match: _match });\n        resolve(result);\n      });\n    });\n  }\n\n  if (_route.component.load) {\n    // 在服务端加载异步组件\n    context = await loadAsyncRouterComponent();\n  }\n\n  // 获取路由dom\n  const _Router = router.dom;\n\n  let html = ReactDOMServer.renderToString(\n    <Provider store={store}>\n      <StaticRouter location={req.url} context={context}>\n        <_Router />\n      </StaticRouter>\n    </Provider>\n  );\n\n  let reduxState = JSON.stringify(store.getState()).replace(/</g, '\\\\x3c');\n\n  // 获取页面的meta，嵌套到模版中\n  let meta = DocumentMeta.renderAsHTML();\n\n  if (context.code == 301) {\n    res.writeHead(301, {\n      Location: context.url\n    });\n  } else {\n    res.status(context.code);\n    res.render('../dist/index.ejs', { html, reduxState, meta });\n  }\n\n  // res.render('../dist/index.ejs', { html, reduxState, meta });\n  res.end();\n\n});\n\napp.listen(port);\nconsole.log('server started on port ' + port);\n","\nimport express from 'express';\nimport { auth_cookie_name } from '../../config';\n\n// (安全实施) 服务端储存 token cookie 设置成httpOnly\nexport default () => {\n\n  const router = express.Router();\n\n  router.post('/in', (req, res)=>{\n\n    const nickname = req.body.nickname;\n    \n    res.cookie(auth_cookie_name, nickname, { path: '/', httpOnly: true, maxAge: 1000 * 60 * 60 * 24 * 30 })\n    res.send({ success: true })\n  })\n\n  router.post('/out', (req, res)=>{\n    res.clearCookie(auth_cookie_name)\n    res.send({ success: true })\n  })\n\n  return router\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers';\nimport { createLogger } from 'redux-logger';\n\nlet middleware = [ thunk ];\n\n// 如果是在客户端环境，并且是开发模式，那么打印redux日志\nif (!process.env.__NODE__ && __DEV__) middleware.push(createLogger());\n\nexport default function configureStore(initialState) {\n  const store = createStore(\n    rootReducer,\n    initialState,\n    compose(\n      applyMiddleware(...middleware),\n    )\n  )\n  return store;\n}\n","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"axios\");","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"express\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"path\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-css-modules\");","module.exports = require(\"react-document-meta\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-logger\");","module.exports = require(\"redux-thunk\");"],"sourceRoot":""}